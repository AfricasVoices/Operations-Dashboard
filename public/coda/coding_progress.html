<html>
<meta charset="utf-8">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Data Pipeline Dashboard</title>  
    <!-- Compiled and minified CSS -->
    <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"> </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="http://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
    <script src="https://www.gstatic.com/firebasejs/5.5.9/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.5.9/firebase-firestore.js" ></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyCUHQE4gDk35-BtZrlNEkNbr1nX2Yn4l5Q",
            authDomain: "avf-dashboards.firebaseapp.com",
            databaseURL: "https://avf-dashboards.firebaseio.com",
            projectId: "avf-dashboards",
            storageBucket: "avf-dashboards.appspot.com",
            messagingSenderId: "1063777163571"
        };
        firebase.initializeApp(config);
    </script>
    <script>
            $(document).ready(function(){
                //Grab the cells of the last rows
                $('#codingtable td:nth-child(4)').each(function() {
                    var Done = $(this).text();
                    //Style the entire row conditionally based on the cell value
                    if ((Done > 0) && (Done <= 25)) {
					    $(this).parent().css('background-color', '#ffe5e5'); 
					}
					else if((Done > 25) && (Done <= 50)) {
						$(this).parent().css('background-color', '#87cefa'); 
					}
					else if((Done > 50) && (Done <= 75)) {
						$(this).parent().css('background-color', '#d6ffd9'); 
					}
					else {
						$(this).parent().css('background-color', 'white'); 
					}
                });
            });
    </script>
</head>
<body>
    <nav class='nav'>
        <div class="nav-wrapper container">
            <img class='brand-logo'src="avfdashboardlogo.png">
            <ul class="right">
                <li><a class='nav-link' href="https://avf-dashboards.firebaseapp.com/coda/coding_progress.html">MESSAGE CODING</a></li>       
            </ul>
        </div>
    </nav>    
    <script src="coding_progress.js"></script>
    <div class="container">
        <table id='codingtable'>
            <thead>
                <tr class='table-heading'>
                    <th>Dataset</th>
                    <th>Messages</th>
                    <th>Messages with a label</th>
                    <th>Done</th>
                </tr>
            </thead>
            <tbody id="coding_status_body"></tbody>
        </table>
        <div id="last_update">Last updated: </div>
    </div>
</body>
</html>
