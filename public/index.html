<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" type="image/png" href="images/favicon.png" />
    <title>Operations Dashboard</title>
    <script src="vendor/firebase-7.12.0/firebase-app.js"></script>
    <script src="vendor/firebase-7.12.0/firebase-firestore.js"></script>
    <script src="vendor/firebase-7.12.0/firebase-auth.js"></script>
    <link rel="stylesheet" href="vendor/font-5.11.2/fontawesome/css/all.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="firebase.js"></script>
</head>
<body>
    <header class="main-header">
        <div>
            <a href="#" class="main-header__brand">
                <img src="images/avfdashboardlogo.png" alt="avf-logo">
            </a>
        </div>
        <nav class="main-nav">
            <ul class="main-nav__items">
                <li class="main-nav__item">
                    <a href="#">SYSTEMS</a>
                </li>
                <li class="main-nav__item coding-progress-link">
                    <a href="#">MESSAGE CODING</a>
                </li>
                <!-- <li class="main-nav__item main-nav__item-dropdown"></li> -->
                <li class="main-nav__item main-nav__item--dropdown">
                    <button class="dropbtn">
                        TRAFFIC <i class="fa fa-caret-down"></i>
                    </button>
                    <div class="project-dropdown-menu">
                      <!-- <a href="#">Link</a> -->
                    </div>
                </li>
                <li class="main-nav__item main-nav__item--logout">
                    <button>
                        Logout <i class="fas fa-sign-out-alt mx-2"></i>
                    </button>
                </li>
            </ul>
        </nav>
    </header>

    <header class="traffic-header">
        <div class="traffic-item">
            <a href="#" class="traffic-header__brand">
                UNICEF-SOM <i class="fas fa-chart-bar"></i>
            </a>
        </div>
        <div class="traffic-item">
            <p style="padding: 9.6px; color: gray;">TimeScale <i class="fas fa-hourglass-half"></i></p>
            <div class="traffic-item__timescale btn-group2">
                <button id="buttonUpdateView10Minutes">10 minutes</button>
                <button id="buttonUpdateViewOneDay">1 day</button>
            </div>
        </div>
        <div class="traffic-item">
            <p style="margin: 9.6px; color: gray;">TimeFrame <i class="far fa-clock mx-2"></i></p>
            <div class="custom-select" style="width:100px;" id="timeFrame">
                <select>
                    <option value="default">Default</option>
                    <option value="1">48 Hours </option>
                    <option value="6">7 days</option>
                    <option value="13">14 days</option>
                    <option value="29">30 days</option>
                </select>
            </div>
        </div>
        <div class="traffic-item" style="width: 280px;">
            <p style="padding: 9.6px; color: gray" >Last Updated: </p>
            <div id="lastUpdated" style="color: brown;"></div>
        </div>
    </header>
                            

        <!-- <nav class="traffic-nav">
            <ul class="traffic-nav__items">
                <li class="traffic-nav__item">
                    <button class="dropbt">
                        TRAFFIC <i class="fa fa-caret-down"></i>
                    </button>
                    <div class="project-dropdown-menu">
                    
                    </div>
                </li>
                <li class="traffic-nav__item">
                    <button>
                        Logout <i class="fas fa-sign-out-alt mx-2"></i>
                    </button>
                </li>
                <li class="traffic-nav__item">
                    <a href="#">MESSAGE CODING</a>
                    <div id="lastUpdated"></div>
                </li>
            </ul>
        </nav> -->
    

    <main>
        <!-- Display Coding Progress Table Here -->
        <section class="coding_progress coding-progress-container"></section>
        <!-- Display Graphs Here -->
        <section class="graph-container"></section>
    </main>

    <!-- NAVBAR WITH DROPDOWN & RESPONSIVE TOGGLE-->
    <nav class="navbar navbar-expand-sm navbar-brown bg-white mb-1 py-0">
        <div class="container">
            <!-- <a class="navbar-brand" href="#"><img class="logo" src="images/avfdashboardlogo.png" alt="avf-logo"></a> -->
            <!-- TOGGLE TRIGGER FOR SMALL DEVICES -->
            <button class="navbar-light navbar-toggler" data-toggle="collapse" data-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- RESPONSIVE TOGGLE -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li><a class="coding-progress-link nav-link border-left border-top border-right">MESSAGE CODING</a></li>
                    <li class="nav-item dropdown">
                        <!-- DROPDOWN TRIGGER -->
                        <a href="#" class="traffics-link nav-link border-left border-top border-right dropdown-toggle" data-toggle="dropdown">TRAFFIC</a> 
                        <!-- DROPDOWN MENU
                        Display dropdown menu here -->
                        <div class="dropdown-menu project-menu"></div>
                    </li> 
                    <li class="px-2 pt-1 border-top border-right"><button class="logout-btn btn btn-brown btn-sm shadow">Logout<i class="fas fa-sign-out-alt mx-2"></i></button></li>
                </ul>
            </div>
        </div>
    </nav> 
    <button style="top: 20px" class="accordion">Section 1</button>
        <div class="panel">
            <div class="accordion" id="accordionExample">
                <div class="card">
                    <div id="headingOne">
                        <h2 class="mb-0">
                            <button class="btn btn-brown" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            Message Coding Table Header Definitions
                            </button>
                        </h2>
                    </div>
                    <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                    <div class="card-body">
                        <table class="table table-bordered table-hover shadow">
                            <thead>
                                <tr class="table-heading">
                                    <th scope="col">Table Headers</th>
                                    <th scope="col">Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th scope="row">Dataset</th>
                                    <td>The collection of messages for a given radio episode or survey</td>
                                </tr>
                                <tr>
                                    <th scope="row">Unique Texts</th>
                                    <td>Shows the total number of unique texts in the dataset. Note that to reduce labelling load, Coda only displays each unique message text once, so this is not the total number of messages received.</td>
                                </tr>
                                <tr>
                                    <th scope="row">Unique Texts with a label</th>
                                    <td>Shows the number of unique texts which contain a checked (i.e. manually verified) label in at least one code scheme</td>
                                </tr>
                                <tr>
                                    <th scope="row">Done</th>
                                    <td>Shows the % of labeled unique texts over total unique texts.</td>
                                </tr>
                                <tr>
                                    <th scope="row">Wrong Scheme messages</th>
                                    <td>Shows the number of ‘messages with a label’ that contain a checked “WS (Wrong Scheme)” label.</td>
                                </tr>
                                <tr>
                                    <th scope="row">WS %</th>
                                    <td>Shows the percentage of ‘messages with a label’ that contain a checked “WS (Wrong Scheme)” label.</td>
                                </tr>
                                <tr>
                                    <th scope="row">Not Coded messages</th>
                                    <td>Shows the number of messages with a label’ that contain a checked “NC (Not Coded)” label.</td>
                                </tr>
                                <tr>
                                    <th scope="row">NC %</th>
                                    <td>Shows the percentage of 'messages with a label’ that contain a checked “NC (Not Coded)” label.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- <div class="card">
        <p class="h5 text-center card-title text-uppercase"><u>Threats to Validity</u></p>
        <div class="card-text">
            <p><strong>The outbound and failed messages graphs may show underestimates when TextIt is under outbound load</strong><br>
            This is has two causes:
            <ol>
                <li>TextIt has to rate-limit outbound messages to avoid problems with the MNOs being unable to handle a large number of requests over a short period.</li>
                <li>We can only query messages in TextIt by created_on date, not modified_on date.</li>
            </ol>
            Combined, this means it’s too expensive for us to get the status of all the queued messages, because we’d have to pull 10s of thousands of messages from the past few hours every 10 minutes, which TextIt can’t deliver. As a result, TextIt will only show the first few minutes of a burst. We mitigate this by running an expensive recount of the previous day nightly, so that previous days should always be unaffected by this issue.</p>
            
            <p><strong>There is a lag between when a message is sent/received by TextIt and when it shows up on the dashboards, typically by up to 10-15 minutes.</strong><br>
            This is because messages are counted in 10 minute blocks, and at the end of each 10 minute block only.</p>
        
            <p><strong>Total failures are reported based only on the response received by the aggregator. </strong><br>
            Therefore the failures graph may underestimate if the aggregator reports a success but the MNO fails to deliver the message to the receipient, or show an overestimate if the aggregator delivers messages but fails to respond with a success status. Vice versa for total outbound messages.</p>
        </div>
    </div> -->
     <!-- Display Coding Progress Table Here -->
    <!-- <section class="coding_progress coding-progress-container"></section> -->
    <!-- Display Graphs Here -->
    <!-- <section class="graph-container"></section> -->
    <script src="vendor/d3-5.12.0/d3.js"></script>
    <script src="vendor/d3-legend-2.25.6/d3-legend.min.js"></script>
    <script src="vendor/d3-tip-0.9.1/d3-tip.min.js"></script>
    <script src="select_box.js"></script>
    <script src="auth.js"></script>
    <script src="data.js"></script>
    <script src="UI.js"></script>
    <script src="graph.js"></script>
    <script src="coding_progress.js"></script>
    <script src="accordion.js"></script>
    <script src="app.js"></script>
</body>
</html>
